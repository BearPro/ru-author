@model Competition

<div class="container">
    <div class="competition-grid">
        <div class="event_card">
            @*<img src="~/img/event.png" />*@
            <div class="info-on-card">
                <h3>@Model.Titile</h3>
                <h4>до @Model.EndDate.ToString("dd.MM.yyyy")</h4>
            </div>
            @if (User.Identity.IsAuthenticated)
            {
                @if ((bool)ViewData["TakingPart"])
                {
                    <a asp-action="Edit"
                       asp-controller="Participant"
                       asp-route-guid="@ViewData["ParticipantGuid"]"><div class="continue_button"><p>Просмотреть заявку</p></div></a>
                }
                else
                {
                    <a asp-action="Become"
                       asp-controller="Participant"
                       asp-route-guid="@Model.Guid"><div class="continue_button"><p>Принять участие</p></div></a>
                }
            }
            else
            {
                <a asp-action="Main"
                   asp-controller="Account"><div class="continue_button"><p>Войти, чтобы принять участие</p></div></a>
            }
        </div>
        <div class="judges-block">
            <h4>Жюри:</h4>
            <div class="judges">
                <div class="judge">
                    <div><img src="~/img/Image 5.png" /></div>
                    <h5>А. Пушкин</h5>
                    <p>
                        Русский поэт, драматург и прозаик, заложивший основы русского реалистического направления,
                        критик и теоретик литературы, историк, публицист; один из самых авторитетных литературных деятелей
                        первой трети XIX века.
                    </p>
                </div>
                <div class="judge">
                    <div><img src="~/img/Image 6.png" /></div>
                    <h5>Д. Быков</h5>
                    <p>
                        Русский писатель, поэт и публицист, литературный критик, радио- и телеведущий, 
                        журналист, преподаватель литературы, кинокритик.
                    </p>
                </div>
            </div>
        </div>
        <div class="prizes-block">
            <h4>Призы:</h4>
        </div>
        <div class="conditions-block">
            <h4>Условия:</h4>
        </div>
        <div class="participant-block">
            <h4>Участники конкурса</h4>
            <table>
                <thead>
                    <tr>
                        <th>Название</th>
                        <th>Автор</th>
                        <th>Рейтинг</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var participant in Model.Participants.Where(s => s.Approved))
                    {
                    <tr>
                        <td>@participant.Poems.First().Title</td>
                        <td>@participant.User.Login</td>
                        <td>@participant.UserScore</td>
                    </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>


















@*<h2>@Model.Titile</h2>
@if ((bool)ViewData["Personal"])
{
    @if ((bool)ViewData["TakingPart"])
    {
    <span>Вы принимаете участие</span>
    <a asp-action="Edit"
       asp-controller="Participant"
       asp-route-guid="@ViewData["ParticipantGuid"]">Ваша заявка</a>
    }
    else
    {
    <a class="btn border-primary"
       asp-action="Become"
       asp-controller="Participant"
       asp-route-id="@Model.Guid.ToString()">Участвовать</a>

    }
    <div class="card card-body">
        <span>Конец подачи заявок: @Model.StartDate.ToString("dd.MM.yyyy")</span>
        <span>Результаты конкурса: @Model.EndDate.ToString("dd.MM.yyyy")</span>
    </div>
}
@if (Model.Description != null)
{
    <div class="card">
        <div class="card-header">
            Описание
        </div>
        <div class="card-body">
            @Model.Description
        </div>
    </div>
}
<hr />
<table class="table table-bordered">
    <thead class="thead-light">
        <tr>
            <td>Участник</td>
            <td>Произведения</td>
        </tr>
    </thead>
    <tbody>
    @foreach (var p in Model.Participants.Where(p => p.Approved))
    {
        <tr 
        @if (p.User.Login == User.Identity.Name)
        {
            Write("class=table-primary");
        }
        >
            <td >@p.User.Login</td>
            <td >
                @foreach (var poem in p.Poems)
                {
                    <span>@poem.Title</span>
                }
            </td>
        </tr>
    }
    </tbody>
</table>*@